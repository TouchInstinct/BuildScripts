
repositories {
    maven { url "http://dl.bintray.com/touchin/touchin-tools" }
}

configurations {
    apigenerator
}

task generateApi() << {
    javaexec {
        //TODO uncomment when jar on bintray will be updated
        //jarArgs.add(configurations.apigenerator.asPath)
        println("${appId}")
        main = "-jar";
        workingDir = file("${rootDir}");
        args = [
                "api-generator-1.0-all.jar",
                "${rootDir}" + "\\app\\Dominos-common\\schemes",
                "$buildDir.absolutePath" + "\\generated\\schemes",
                "libraries\\BuildScripts\\api-java-templates",
                "--package ${appId}"
        ]

        /*jarArgs.add("api-generator-1.0-all.jar")
        jarArgs.add("${rootDir}" + "\\app\\Dominos-common\\schemes")
        jarArgs.add("$buildDir.absolutePath" + "\\generated\\schemes")
        jarArgs.add("libraries\\BuildScripts\\api-java-templates")
        javaexec { main = "-jar"; args = jarArgs; workingDir = file("${rootDir}") }*/
    }
}

dependencies {
    apigenerator 'ru.touchin:api-generator:1.0'
}